# brightbinder.lua
Простые биндер-меню по прицелу для GTA SA:MP (MoonLoader).  
Также содержит функции, упрощающие игру в фракциях SRP.  
  
Папка `brightbinder` содержит меню, которое составил и использую я.  
Его можно использовать как основу для собственных меню.

## Как это работает?
 - Требуются [MoonLoader](https://www.blast.hk/threads/13305/) и плагин [SAMP.Events](https://www.blast.hk/threads/14624/)  
Сам плагин помещается в папку `moonloader`
 - Чтобы вызвать меню, нажмите `LAlt`, удерживая правую кнопку мыши.
   - Если при этом прицел наведён на игрока, его ID/ник можно будет использовать в подстановке.
   - Заголовок окна отображает информацию о выбранном игроке.
 - Файлы меню находятся в папке `moonloader/brightbinder`.  
По умолчанию открывается меню из файла `default.txt`.
 - Структура файлов меню немного схожа со структурой файлов AHK:
   - Отображаемые пункты - строки, начинающиеся с `@`.
     - Отображается текст после `@`. Доступно цветовое форматирование.
   - После них идут действия - простой ввод в чат, либо особое действие, начинающееся с `$`:
     - `$wait X` - ждать X миллисекунд перед выполнением следующего действия.
     - `$showmenu X` - открыть меню из файла `X.txt` (здесь и далее расширение не указывается).
     - `$showtext X` - открыть текст из файла `X.txt` во всплывающем окне.
     - `$showtextwait X` - то же самое, но следующее действие не выполняется, пока окно не закрыто.
   - Возможна автоматическая подстановка данных игроков:
     - `%id` будет заменено на ID игрока, на которого наведён прицел.
     - `%name` - то же самое для ника игрока.
     - `%myid` будет заменено на Ваш ID.
     - `%myname` - то же самое для Вашего ника.
     - Если в строке есть подстановка игрока под прицелом, но игрок не был выбран, строка отправлена не будет.
   - Возможно использование табуляций для более удобного чтения файлов.
 - Файлы меню подгружаются в реальном времени и могут быть изменены налету.
 - Файлы должны иметь кодировку CP1251.  
Простой способ в этом убедиться - использовать за основу уже существующие файлы меню.

## Дополнительные функции
 - Эти функции можно настроить через файл `brightbinder.cfg` в папке скрипта.
 - **Автоматическая смена клиста**  
Скрипт вызовет команду `/clist dst_clist`, если сервер установит вам цвет `src_clist`.  
Пока что значение `src_clist` - RGB код цвета, в будущем будет настроен ID цвета на SRP.
 - **Автоматическая подстановка тега в рацию**
Скрипт автоматически подставит `rtag` перед сообщением при вводе `/r`.
Если значение `rtag` пусто или не указано, подстановки не будет.
 - **Отключение меню выдачи лицензий по прицелу**
Скрипт заблокирует выведение меню `/givelicense` через наведение прицела.
 - Для разработчиков/составителей меню: **Смена режима вывода**  
Доступные значения: `process`, `send`, иное.  
Первые два значения позволяют выбрать опкод для отправки текста.  
Любое другое значение приведёт к выводу отправляемого текста в чат вместо отправки.
